<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Table Fragment</title>
</head>
<body>

<!-- Table container fragment -->
<div th:fragment="table-container" class="table-container">
    <!-- Search box fragment -->
    <div th:fragment="search-box" class="search-container mb-3" th:if="${searchEnabled}">
        <div class="input-group">
            <span class="input-group-text">
                <i class="fas fa-search"></i>
            </span>
            <input type="text" class="form-control" th:id="${tableId + '-search'}" 
                   placeholder="Search..." aria-label="Search table data">
        </div>
    </div>

    <!-- Table responsive wrapper -->
    <div class="table-responsive">
        <table class="table table-striped table-hover" role="table" aria-label="Data table">
            <thead class="table-dark">
                <tr>
                    <th th:each="column : ${columns}" 
                        th:class="${column.sortable ? 'sortable' : ''}"
                        th:attr="data-sort=${column.sortable ? column.key : null}"
                        scope="col">
                        <span th:text="${column.label}"></span>
                        <i th:if="${column.sortable}" 
                           th:class="'fas ms-1 ' + (${column.sortable and sortKey == column.key} ? 
                                    (${sortDirection.name() == 'ASC'} ? 'fa-sort-up' : 'fa-sort-down') : 'fa-sort')"></i>
                    </th>
                </tr>
            </thead>
            <tbody>
                <!-- Empty state fragment -->
                <tr th:fragment="empty-state" th:if="${#lists.isEmpty(data)}">
                    <td th:colspan="${#lists.size(columns)}" class="text-center text-muted py-4">
                        <i class="fas fa-inbox fa-3x mb-3"></i>
                        <div class="h5">No data available</div>
                        <p class="mb-0">There are no items to display at the moment.</p>
                    </td>
                </tr>
                
                <!-- Data rows -->
                <tr th:each="row : ${data}" th:unless="${#lists.isEmpty(data)}">
                    <td th:each="column : ${columns}" th:text="${row[column.key] ?: ''}"></td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Pagination fragment -->
    <nav th:fragment="pagination" th:if="${paginationConfig != null}" aria-label="Table pagination">
        <ul class="pagination justify-content-center">
            <!-- Previous button -->
            <li th:class="'page-item' + (${paginationConfig.currentPage <= 1} ? ' disabled' : '')">
                <a class="page-link" href="#" th:attr="data-page=${paginationConfig.currentPage - 1}" 
                   aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                    Previous
                </a>
            </li>
            
            <!-- Page numbers -->
            <li th:each="page : ${#numbers.sequence(1, totalPages)}" 
                th:class="'page-item' + (${page == paginationConfig.currentPage} ? ' active' : '')">
                <a class="page-link" href="#" th:attr="data-page=${page}" th:text="${page}"></a>
            </li>
            
            <!-- Next button -->
            <li th:class="'page-item' + (${paginationConfig.currentPage >= totalPages} ? ' disabled' : '')">
                <a class="page-link" href="#" th:attr="data-page=${paginationConfig.currentPage + 1}" 
                   aria-label="Next">
                    Next
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
</div>

</body>
</html>